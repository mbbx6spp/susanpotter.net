<!DOCTYPE html>
<html lang="en-us">

  <head>
    <meta charset="utf-8">
    <meta name="theme-color" content="#123652"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta name="author" content="Susan Potter">
    <meta name="description" content="/">
    <meta name="keywords" content="Distributed Systems, Functional Programming, Systems Architecture, Software Development, Software Engineering Leadership, Technical Strategy">

    <meta property="og:site_name" content="Susan Potter">
    <meta property="og:title" content="
  TypeScript enum versus const enum - Susan Potter
">
    <meta property="og:description" content="">
    <meta property="og:type" content="website">
    <meta property="og:url" content="/software/typescript-enum-versus-const-enum/">
    <meta property="og:image" content="/">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="/software/typescript-enum-versus-const-enum/">
    <meta name="twitter:image" content="/">

    <title>
  TypeScript enum versus const enum - Susan Potter
</title>

    <link rel="canonical" href="/software/typescript-enum-versus-const-enum/">
    
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ" crossorigin="anonymous">
    
    <link  rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700">
    <link rel="stylesheet" href="/css/normalize.min.css">
    <link rel="stylesheet" href="/css/style.min.css">

    

    
      <link rel="stylesheet" href="/styles/main.css">
    

    <link href="/favicon.ico" rel="shortcut icon">

    
      <link rel="alternate" href="/index.xml" type="application/rss+xml" title="Susan Potter">
      <link href="/index.xml" rel="feed" type="application/rss+xml" title="Susan Potter" />
    

    <meta name="generator" content="Hugo 0.74.3" />
  </head>

  <body class="">
    <main class="wrapper">
      <nav class="navigation">
  <section class="container">
    <a class="navigation-title" href="/">Susan Potter</a>
    <input type="checkbox" id="menu-control"/>
    <label class="menu-mobile  float-right " for="menu-control">
      <span class="btn-mobile  float-right ">&#9776;</span>
      <ul class="navigation-list">
        
          
            <li class="navigation-item   align-left  ">
              <a class="navigation-link" href="/about/">About</a>
            </li>
          
            <li class="navigation-item   align-left  ">
              <a class="navigation-link" href="/talks/">Talks</a>
            </li>
          
            <li class="navigation-item   align-left  ">
              <a class="navigation-link" href="/software/">Software</a>
            </li>
          
            <li class="navigation-item   align-left  ">
              <a class="navigation-link" href="/snippets/">Snippets</a>
            </li>
          
        
        
      </ul>
    </label>
  </section>
</nav>


      <div class="content">
        
  <section class="container page">
  <article>
    <header>
      <h1>TypeScript enum versus const enum</h1>
      <div class="dateinfo">
        
        <span class="date"><strong>Date:</strong> September 25, 2020</span>
        
        
        <span class="lastmod"><strong>Last modified:</strong> September 25, 2020</span>
        
      

      </div>

    </header>

    
<p>
Today I found that there is a difference between <code class="verbatim">enum</code> and <code class="verbatim">const
enum</code> in TypeScript in the generated JavaScript. Namely:</p>
<ul>
<li>
<p>with a non-const <code class="verbatim">enum</code> the compiler generates an object with key-value pairs.</p>
</li>
<li>
<p>with a <code class="verbatim">const enum</code> the definition alone doesn&#39;t generate any code, only usage of the enum does.</p>
</li>
</ul>
<p><strong>Note:</strong> all generated JavaScript code is generated from the TypeScript
v4.1 compiler.</p>
<div id="outline-container-headline-1" class="outline-2">
<h2 id="headline-1">
non-const <code class="verbatim">enum</code> definition
</h2>
<div id="outline-text-headline-1" class="outline-text-2">
<p>
Let&#39;s say we wanted to rate desserts, we might have a rating scale
defined as an enumeration. Using the <code class="verbatim">enum</code> construct in TypeScript we
might define something like:</p>
<div class="src src-typescript">
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-typescript" data-lang="typescript"><span style="color:#66d9ef">enum</span> <span style="color:#a6e22e">DessertRating</span> {
  <span style="color:#a6e22e">Delicious</span>,
  <span style="color:#a6e22e">ToDieFor</span>,
  <span style="color:#a6e22e">Scrumptious</span>,
}
</code></pre></div>
</div>
<p>
TypeScript generates the following JavaScript:</p>
<div class="src src-typescript">
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-typescript" data-lang="typescript"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">DessertRating</span>;
(<span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">DessertRating</span>) {
    <span style="color:#a6e22e">DessertRating</span>[<span style="color:#a6e22e">DessertRating</span>[<span style="color:#e6db74">&#34;Delicious&#34;</span>] <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>] <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Delicious&#34;</span>;
    <span style="color:#a6e22e">DessertRating</span>[<span style="color:#a6e22e">DessertRating</span>[<span style="color:#e6db74">&#34;ToDieFor&#34;</span>] <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>] <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;ToDieFor&#34;</span>;
    <span style="color:#a6e22e">DessertRating</span>[<span style="color:#a6e22e">DessertRating</span>[<span style="color:#e6db74">&#34;Scrumptious&#34;</span>] <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>] <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Scrumptious&#34;</span>;
})(<span style="color:#a6e22e">DessertRating</span> <span style="color:#f92672">||</span> (<span style="color:#a6e22e">DessertRating</span> <span style="color:#f92672">=</span> {}));
</code></pre></div>
</div>
</div>
</div>
<div id="outline-container-headline-2" class="outline-2">
<h2 id="headline-2">
<code class="verbatim">const enum</code> definition
</h2>
<div id="outline-text-headline-2" class="outline-text-2">
<p>
Now we might want to rate our day in our app so we might have a scale
defined as a <code class="verbatim">const enum</code> for <code class="verbatim">DayRating</code> like so:</p>
<div class="src src-typescript">
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-typescript" data-lang="typescript"><span style="color:#66d9ef">const</span> <span style="color:#66d9ef">enum</span> <span style="color:#a6e22e">DayRating</span> {
  <span style="color:#a6e22e">Amazing</span>,
  <span style="color:#a6e22e">Wonderful</span>,
  <span style="color:#a6e22e">Engaging</span>,
}
</code></pre></div>
</div>
<p>
For the <code class="verbatim">const enum</code> definition case this would yield no JavaScript output.</p>
</div>
</div>
<div id="outline-container-headline-3" class="outline-2">
<h2 id="headline-3">
<code class="verbatim">enum</code> Usage
</h2>
<div id="outline-text-headline-3" class="outline-text-2">
<p>
Now you might be wondering what do usages of the enum values look like
in each case.</p>
<div class="src src-typescript">
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-typescript" data-lang="typescript"><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">dessertRating</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">DessertRating</span>.<span style="color:#a6e22e">Scrumptious</span>;
</code></pre></div>
</div>
<p>
This generates the following JavaScript as output:</p>
<div class="src src-typescript">
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-typescript" data-lang="typescript"><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">dessertRating</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">DessertRating</span>.<span style="color:#a6e22e">Scrumptious</span>;
</code></pre></div>
</div>
<p>
For the case of <code class="verbatim">const enum</code> we might write JavaScript like so:</p>
<div class="src src-typescript">
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-typescript" data-lang="typescript"><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">dayRating</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">DayRating</span>.<span style="color:#a6e22e">Amazing</span>;
</code></pre></div>
</div>
<p>
Which would generate the following JavaScript:</p>
<div class="src src-typescript">
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-typescript" data-lang="typescript"><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">dayRating</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span> <span style="color:#75715e">/* Amazing */</span>;
</code></pre></div>
</div>
<p>
This is known as <em>inlining</em>.</p>
</div>
</div>
<div id="outline-container-headline-4" class="outline-2">
<h2 id="headline-4">
When can the TypeScript typechecker not inline?
</h2>
<div id="outline-text-headline-4" class="outline-text-2">
<p>
If you need to <em>compute</em> any enum value from, say, then you may not be
able to take advantage of the lower bloat benefits of using <code class="verbatim">const
enum</code> in more places.</p>
<p>
For example, suppose we have a configuration file generated by our
deploy process that is imported and a value in there is queried to
generate a derived value for the value of any enum value, then we
would not be able to define it as a <code class="verbatim">const enum</code>.</p>
<p>
Let&#39;s say this is the generated config:</p>
<div class="src src-json">
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{
  <span style="color:#f92672">&#34;currentInstanceSize&#34;</span>: <span style="color:#e6db74">&#34;t3.medium&#34;</span>
}</code></pre></div>
</div>
<p>
And we try to use the <code class="verbatim">config.currentInstanceSize</code> as the string value
for one of our enum values like so:</p>
<div class="src src-typescript">
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-typescript" data-lang="typescript"><span style="color:#66d9ef">import</span> <span style="color:#a6e22e">config</span> <span style="color:#a6e22e">from</span> <span style="color:#e6db74">&#39;./config&#39;</span>;

<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">enum</span> <span style="color:#a6e22e">InstanceSize</span> {
  <span style="color:#a6e22e">t3_small</span>  <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;t3.small&#39;</span>,
  <span style="color:#a6e22e">t3_medium</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;t3.medium&#39;</span>,
  <span style="color:#a6e22e">t3_large</span>  <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;t3.large&#39;</span>,
  <span style="color:#a6e22e">current</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">config</span>.<span style="color:#a6e22e">currentInstanceSize</span>,
}
</code></pre></div>
</div>
<p>
Then the TypeScript typechecker would say something like the following
in our error output:</p>
<div class="src src-text">
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">Computed values are not permitted in an enum with string valued members.</code></pre></div>
</div>
<p>
Another limitation on <code class="verbatim">const enum</code> definition are that you cannot do a
dynamic lookup of the value from a string, such as:</p>
<div class="src src-typescript">
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-typescript" data-lang="typescript"><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">lookup</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;m3_small&#39;</span>;
<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">instanceSize</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">InstanceSize</span>[<span style="color:#a6e22e">lookup</span>];
</code></pre></div>
</div>
<p>
This yields the typechecker error of:</p>
<div class="src src-text">
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">A const enum member can only be accessed using a string literal.</code></pre></div>
</div>
<p>
Yay for type errors letting us know when we can&#39;t do something instead
of waiting until runtime for something to blow up in unpredicatable ways.</p>
</div>
</div>
<div id="outline-container-headline-5" class="outline-2">
<h2 id="headline-5">
What is an ambient <code class="verbatim">enum</code>?
</h2>
<div id="outline-text-headline-5" class="outline-text-2">
<p>
Ambient enums are those that have the <code class="verbatim">declare</code> keyword prefixed to
the definition. These are used to define the shape of an existing enum
type.</p>
<p>
This can look like the following:</p>
<div class="src src-typescript">
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-typescript" data-lang="typescript"><span style="color:#66d9ef">declare</span> <span style="color:#66d9ef">enum</span> <span style="color:#a6e22e">DOW</span> {
  <span style="color:#a6e22e">Monday</span>,
  <span style="color:#a6e22e">Tuesday</span>,
  <span style="color:#a6e22e">Wednesday</span>,
  <span style="color:#a6e22e">Thursday</span>,
  <span style="color:#a6e22e">Friday</span>,
  <span style="color:#a6e22e">Saturday</span>,
  <span style="color:#a6e22e">Sunday</span>,
}
</code></pre></div>
</div>
<p>
There are other differences and limitations that are <em>enumerated</em> (I
couldn&#39;t help myself) here: <a href="https://www.typescriptlang.org/docs/handbook/enums.html">TypeScript Handbook: Enums</a></p>
</div>
</div>

  </article>

  
</section>


      </div>
      
        <footer class="footer">
  <section class="container">
    
      <div class="sns-shares sp-sns-shares">
        
          <a class="sns-share twitter-share" aria-label="Share on twitter" href="https://twitter.com/intent/tweet?original_referer=%2fsoftware%2ftypescript-enum-versus-const-enum%2f&ref_src=twsrc%5Etfw&text=TypeScript%20enum%20versus%20const%20enum Susan%20Potter&tw_p=tweetbutton&url=%2fsoftware%2ftypescript-enum-versus-const-enum%2f"><i class="fab fa-twitter"></i></a>
        
        
          <a class="sns-share linkedIn-share" aria-label="Share on LinkedIn" href="https://www.linkedin.com/sharing/share-offsite/?url=%2fsoftware%2ftypescript-enum-versus-const-enum%2f"><i class="fab fa-linkedin"></i></a>
        
      </div>
    
    
  </section>
  <div class="fixed-bar">
    <section class="container">
      
      <div class="social-list">
        <span>Profiles:</span>
        
          <span class="social-item">
            <a href="https://github.com/mbbx6spp/" aria-label="Github" >
              
                <i class="fab fa-github" aria-hidden="true"></i>
              
            </a>
          </span>
        
          <span class="social-item">
            <a href="https://keybase.io/mbbx6spp" aria-label="Keybase" >
              
                <i class="fab fa-keybase" aria-hidden="true"></i>
              
            </a>
          </span>
        
          <span class="social-item">
            <a href="https://www.linkedin.com/in/susanpotter/" aria-label="LinkedIn" >
              
                <i class="fab fa-linkedin" aria-hidden="true"></i>
              
            </a>
          </span>
        
          <span class="social-item">
            <a href="https://slideshare.net/mbbx6spp" aria-label="Slideshare" >
              
                <i class="fab fa-slideshare" aria-hidden="true"></i>
              
            </a>
          </span>
        
          <span class="social-item">
            <a href="https://twitter.com/SusanPotter" aria-label="Twitter" >
              
                <i class="fab fa-twitter" aria-hidden="true"></i>
              
            </a>
          </span>
        
      </div>
      
      
        <div class="sns-shares pc-sns-shares">
          <span>Share:</span>
          
            <a class="sns-share twitter-share" aria-label="Share on twitter" href="https://twitter.com/intent/tweet?original_referer=%2fsoftware%2ftypescript-enum-versus-const-enum%2f&ref_src=twsrc%5Etfw&text=TypeScript%20enum%20versus%20const%20enum Susan%20Potter&tw_p=tweetbutton&url=%2fsoftware%2ftypescript-enum-versus-const-enum%2f"><i class="fab fa-twitter" aria-hidden="true"></i></a>
          
          
            <a class="sns-share linkedIn-share" aria-label="Share on LinkedIn" href="https://www.linkedin.com/sharing/share-offsite/?url=%2fsoftware%2ftypescript-enum-versus-const-enum%2f"><i class="fab fa-linkedin" aria-hidden="true"></i></a>
          
        </div>
      
    </section>
  </div>
</footer>

      
    </main>

    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-837842-1', 'auto');
	
	ga('send', 'pageview');
}
</script>


  <script src="/js/app.js"></script>
  
  </body>
</html>
