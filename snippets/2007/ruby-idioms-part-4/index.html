<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Language" content="en">

    <meta name="author" content="Susan Potter">
    <meta name="description" content="To splat or not to splat, that is the question.  In Java to unpack an array&#39;s values into separate variables you would need to do something like the following: burgers = [:hamburger, :bocaburger, :gardenburger, :turkeyburger] t = burgers[0] u = burgers[1] v = burgers[2] w = burgers[3]   In the Ruby mindset this would look more like the following: burgers = [:hamburger, :bocaburger, :gardenburger, :turkeyburger] t, u, v = *burgers # t=&gt;:hamburger, u=&gt; :bocaburger, v=&gt;:gardenburger t, u, v, w = *burgers # t=&gt;:hamburger, u=&gt;:bocaburger, v=&gt;:gardenburger, w=&gt;:turkeyburger t, u, v, w, x = *burgers # t=&gt;:hamburger, u=&gt;:bocaburger, v=&gt;:gardenburger, w=&gt;:turkeyburger, x=&gt;nil   Think of * (or splat) as the Ruby way of unpacking the elements of an Array into separate variables in Ruby.">
    <meta name="keywords" content="Distributed Systems, Functional Programming, Systems Architecture, Software Development, Software Engineering Leadership, Technical Strategy">

    

    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Ruby Idioms, Part 4"/>
<meta name="twitter:description" content="To splat or not to splat, that is the question.  In Java to unpack an array&#39;s values into separate variables you would need to do something like the following: burgers = [:hamburger, :bocaburger, :gardenburger, :turkeyburger] t = burgers[0] u = burgers[1] v = burgers[2] w = burgers[3]   In the Ruby mindset this would look more like the following: burgers = [:hamburger, :bocaburger, :gardenburger, :turkeyburger] t, u, v = *burgers # t=&gt;:hamburger, u=&gt; :bocaburger, v=&gt;:gardenburger t, u, v, w = *burgers # t=&gt;:hamburger, u=&gt;:bocaburger, v=&gt;:gardenburger, w=&gt;:turkeyburger t, u, v, w, x = *burgers # t=&gt;:hamburger, u=&gt;:bocaburger, v=&gt;:gardenburger, w=&gt;:turkeyburger, x=&gt;nil   Think of * (or splat) as the Ruby way of unpacking the elements of an Array into separate variables in Ruby."/>

    <meta property="og:title" content="Ruby Idioms, Part 4" />
<meta property="og:description" content="To splat or not to splat, that is the question.  In Java to unpack an array&#39;s values into separate variables you would need to do something like the following: burgers = [:hamburger, :bocaburger, :gardenburger, :turkeyburger] t = burgers[0] u = burgers[1] v = burgers[2] w = burgers[3]   In the Ruby mindset this would look more like the following: burgers = [:hamburger, :bocaburger, :gardenburger, :turkeyburger] t, u, v = *burgers # t=&gt;:hamburger, u=&gt; :bocaburger, v=&gt;:gardenburger t, u, v, w = *burgers # t=&gt;:hamburger, u=&gt;:bocaburger, v=&gt;:gardenburger, w=&gt;:turkeyburger t, u, v, w, x = *burgers # t=&gt;:hamburger, u=&gt;:bocaburger, v=&gt;:gardenburger, w=&gt;:turkeyburger, x=&gt;nil   Think of * (or splat) as the Ruby way of unpacking the elements of an Array into separate variables in Ruby." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/snippets/2007/ruby-idioms-part-4/" />
<meta property="article:published_time" content="2007-01-22T19:36:00-06:00" />
<meta property="article:modified_time" content="2007-01-22T19:36:00-06:00" />


    
      <base href="/snippets/2007/ruby-idioms-part-4/">
    
    <title>
  Ruby Idioms, Part 4 · Susan Potter
</title>

    
      <link rel="canonical" href="/snippets/2007/ruby-idioms-part-4/">
    

    <link href="https://fonts.googleapis.com/css?family=Lato:400,700%7CMerriweather:300,700%7CSource+Code+Pro:400,700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.13.0/css/all.css" integrity="sha384-Bfad6CLCknfcloXFOyFnlgtENryhrpZCe29RTifKEixXQZ38WheV+i/6YWSzkz3V" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css" integrity="sha256-l85OmPOjvil/SOvVt3HnSSjzF1TUMyT9eV0c2BzEGzU=" crossorigin="anonymous" />

    
      
      
      <link rel="stylesheet" href="/css/coder.min.3219ef62ae52679b7a9c19043171c3cd9f523628c2a65f3ef247ee18836bc90b.css" integrity="sha256-MhnvYq5SZ5t6nBkEMXHDzZ9SNijCpl8&#43;8kfuGINryQs=" crossorigin="anonymous" media="screen" />
    

    

    

    
      <link rel="stylesheet" href="/styles/main.css" />
    

    

    <link rel="icon" type="image/png" href="/images/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/images/favicon-16x16.png" sizes="16x16">

    <meta name="generator" content="Hugo 0.64.0" />
  </head>

  
  
  <body class="colorscheme-light"
        onload=""
  >
    <main class="wrapper">
      <nav class="navigation">
  <section class="container">
    <a class="navigation-title" href="/">
      Susan Potter
    </a>
    
    <input type="checkbox" id="menu-toggle" />
    <label class="menu-button float-right" for="menu-toggle"><i class="fas fa-bars"></i></label>
    <ul class="navigation-list">
      
        
          <li class="navigation-item">
            <a class="navigation-link" href="/about/">About</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="/talks/">Talks</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="/software/">Software</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="/snippets/">Snippets</a>
          </li>
        
      
      
    </ul>
    
  </section>
</nav>


      <div class="content">
        
  <section class="container page">
  <article>
    <header>
      <h1>Ruby Idioms, Part 4</h1>
    </header>

    <p>
To splat or not to splat, that is the question.
</p>
<p>
In Java to unpack an array&#39;s values into separate variables you would
need to do something like the following:
</p>
<div class="src src-ruby">
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby">    burgers <span style="color:#f92672">=</span> <span style="color:#f92672">[</span><span style="color:#e6db74">:hamburger</span>, <span style="color:#e6db74">:bocaburger</span>, <span style="color:#e6db74">:gardenburger</span>, <span style="color:#e6db74">:turkeyburger</span><span style="color:#f92672">]</span>
    t <span style="color:#f92672">=</span> burgers<span style="color:#f92672">[</span><span style="color:#ae81ff">0</span><span style="color:#f92672"></span><span style="color:#f92672">]</span>
    u <span style="color:#f92672">=</span> burgers<span style="color:#f92672">[</span><span style="color:#ae81ff">1</span><span style="color:#f92672"></span><span style="color:#f92672">]</span>
    v <span style="color:#f92672">=</span> burgers<span style="color:#f92672">[</span><span style="color:#ae81ff">2</span><span style="color:#f92672"></span><span style="color:#f92672">]</span>
    w <span style="color:#f92672">=</span> burgers<span style="color:#f92672">[</span><span style="color:#ae81ff">3</span><span style="color:#f92672"></span><span style="color:#f92672">]</span></code></pre></div>
</div>
<p>
In the Ruby mindset this would look more like the following:
</p>
<div class="src src-ruby">
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby">    burgers <span style="color:#f92672">=</span> <span style="color:#f92672">[</span><span style="color:#e6db74">:hamburger</span>, <span style="color:#e6db74">:bocaburger</span>, <span style="color:#e6db74">:gardenburger</span>, <span style="color:#e6db74">:turkeyburger</span><span style="color:#f92672">]</span>
    t, u, v <span style="color:#f92672">=</span> <span style="color:#f92672">*</span>burgers <span style="color:#75715e"># t=&gt;:hamburger, u=&gt; :bocaburger, v=&gt;:gardenburger</span>
    t, u, v, w <span style="color:#f92672">=</span> <span style="color:#f92672">*</span>burgers <span style="color:#75715e"># t=&gt;:hamburger, u=&gt;:bocaburger, v=&gt;:gardenburger, w=&gt;:turkeyburger</span>
    t, u, v, w, x <span style="color:#f92672">=</span> <span style="color:#f92672">*</span>burgers <span style="color:#75715e"># t=&gt;:hamburger, u=&gt;:bocaburger, v=&gt;:gardenburger, w=&gt;:turkeyburger, x=&gt;nil</span></code></pre></div>
</div>
<p>
Think of * (or splat) as the Ruby way of unpacking the elements of an
Array into separate variables in Ruby. This brings me to an even
nicer example. Many moons ago, when I was working on a Java/J2EE
project, I found a piece of code that looked something like the
following (except it has been Rubyfied for this blog entry so that I
do not get sued for sharing outrageously fantastic proprietary code
with the public - ok, ok….even lawyers would understand this
couldn&#39;t be called outrageously fantastic even in a parallel
universe):
</p>
<div class="src src-ruby">
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby">    <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">RunnableWithParams</span> <span style="color:#f92672">&lt;&lt;</span> <span style="color:#66d9ef">Thread</span>
      <span style="color:#66d9ef">def</span> <span style="color:#a6e22e"></span><span style="color:#f92672"></span><span style="color:#a6e22e">initialize</span>(param1)
        @param1 <span style="color:#f92672">=</span> param1
      <span style="color:#66d9ef">end</span>

      <span style="color:#66d9ef">def</span> <span style="color:#a6e22e"></span><span style="color:#f92672"></span><span style="color:#a6e22e">initialize</span>(param1, param2)
        @param1 <span style="color:#f92672">=</span> param1
        @param2 <span style="color:#f92672">=</span> param2
      <span style="color:#66d9ef">end</span>

      <span style="color:#66d9ef">def</span> <span style="color:#a6e22e"></span><span style="color:#f92672"></span><span style="color:#a6e22e">initialize</span>(param1, param2, param3)
        @param1 <span style="color:#f92672">=</span> param1
        @param2 <span style="color:#f92672">=</span> param2
        @param3 <span style="color:#f92672">=</span> param3
      <span style="color:#66d9ef">end</span>

      <span style="color:#66d9ef">def</span> <span style="color:#a6e22e"></span><span style="color:#f92672"></span><span style="color:#a6e22e">run</span>
        <span style="color:#75715e"># some code the uses param1, param2, etc. - in Java this was an empty method body or abstract  - can&#39;t remember</span>
      <span style="color:#66d9ef">end</span>
    <span style="color:#66d9ef">end</span></code></pre></div>
</div>
<p>
Rubifying the the code sure does take some of the sting out of it, but
you can probably still feel my initial pain when I realized what kind
of code I was inheriting.
</p>
<p>
The class name and the variables are in fact the same as the original
code. The problem this tried to solve, which I suppose it did solve in
a stupid way, was to allow Java code to pass parameters over to the
thread&#39;s logic (which, at least, at the time was not possible to do)
in the context of an anonymous class implementation of the method. Now
if you wanted to pass in 4 parameters, you were out of luck OR you had
to beg the core framework people to add that constructor OR you had to
do an ugly JAR patch hack and put your own implementation of
<code class="verbatim">RunnableWithParams</code> class ahead of the core framework JAR in your
CLASSPATH. They were all pretty ugly scenarios. Of course, you could
pass in a List or Map instance, but that really isn&#39;t the point.
</p>
<p>
The most obvious optimization to the code from a readability,
extensibility and utility perspective would be to pass in a list to
the class&#39;s constructor and use elements in the list in the run method
logic. However, Ruby provides a nicer way of doing things from the
perspective of the client code:
</p>
<p>
%pre
  :preserve
</p>
<div class="src src-ruby">
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">RunnableWithParams</span> <span style="color:#f92672">&lt;&lt;</span> <span style="color:#66d9ef">Thread</span>
  <span style="color:#66d9ef">def</span> <span style="color:#a6e22e"></span><span style="color:#f92672"></span><span style="color:#a6e22e">initialize</span>(<span style="color:#f92672">*</span>params)
    @params <span style="color:#f92672">=</span> params
  <span style="color:#66d9ef">end</span>
  <span style="color:#66d9ef">def</span> <span style="color:#a6e22e"></span><span style="color:#f92672"></span><span style="color:#a6e22e">run</span> <span style="color:#75715e"># needs to be defined by clients</span>
  <span style="color:#66d9ef">end</span>
<span style="color:#66d9ef">end</span></code></pre></div>
</div>
<p>
The client code for using this class would look like the following:
</p>
<div class="src src-ruby">
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby">    rwp <span style="color:#f92672">=</span> <span style="color:#66d9ef">RunnableWithParams</span><span style="color:#f92672">.</span>new param1, param2, param3, param4
    <span style="color:#75715e"># instead of the initially optimized suggestion, where the client code would look like the following</span>
    rwp <span style="color:#f92672">=</span> <span style="color:#66d9ef">RunnableWithParams</span><span style="color:#f92672">.</span>new <span style="color:#f92672">[</span>param1, param2, param3, param4<span style="color:#f92672">]</span></code></pre></div>
</div>
<p>
In my view the first line of the snippet above is slightly superior
because it is more natural in the way it reads. Again, different
people will have different views on this perhaps, but both lines of
code provide a decent solution.
</p>

  </article>
</section>

  

      </div>

      
  <footer class="footer">
    <section class="container">
      
      
        ©
        
          2006 -
        
        2020
         Susan Potter 
      
      
         · 
        Powered by <a href="https://gohugo.io/">Hugo</a> & <a href="https://github.com/luizdepra/hugo-coder/">Coder</a>.
      
      
    </section>
  </footer>

    </main>

    

    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-837842-1', 'auto');
	
	ga('send', 'pageview');
}
</script>


    

  </body>

</html>
